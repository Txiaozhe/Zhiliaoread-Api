{"version":3,"sources":["../../../app/controller/user.js"],"names":["crypto","require","Controller","UserController","req","ctx","request","body","res","service","user","register","console","log","login","name","pass","enc","encrypt","token","module","exports"],"mappings":"AAAA;;;;;;;;;;;;AAEA,IAAMA,SAASC,QAAQ,oBAAR,CAAf;AACA,IAAMC,aAAaD,QAAQ,KAAR,EAAeC,UAAlC;;IAEMC,c;;;;;;;;;;;;;;;;;;AAEIC,mB,GAAM,KAAKC,GAAL,CAASC,OAAT,CAAiBC,I;AACzBC,mB;;;uBAEU,KAAKH,GAAL,CAASI,OAAT,CAAiBC,IAAjB,CAAsBC,QAAtB,CAA+BP,GAA/B,C;;;AAAZI,mB;;;;;;;;AAEAA,sBAAM,OAAN;;;;AAGF,qBAAKH,GAAL,CAASE,IAAT,GAAgBC,GAAhB;;;;;;;;;;;;;;;;;;;;;;;;;AAIMJ,mB,GAAM,KAAKC,GAAL,CAASC,OAAT,CAAiBC,I;;AAC7BK,wBAAQC,GAAR,CAAYT,GAAZ;AACII,mB,GAAM,E;;;uBAEW,KAAKH,GAAL,CAASI,OAAT,CAAiBC,IAAjB,CAAsBI,KAAtB,CAA4BV,IAAIW,IAAhC,EAAsCX,IAAIY,IAA1C,C;;;AAAbN,oB;AACAO,mB,GAAMjB,OAAOkB,OAAP,CAAed,IAAIY,IAAnB,C;;AACZ,oBAAGN,KAAK,CAAL,EAAQM,IAAR,KAAiBC,GAApB,EAAyB;AACvBT,wBAAM;AACJW,2BAAO;AADH,mBAAN;AAGD;;;;;;;;AAEDX,sBAAM;AACJW,yBAAO;AADH,iBAAN;;;;AAKF,qBAAKd,GAAL,CAASE,IAAT,GAAgBC,GAAhB;;;;;;;;;;;;;;;;;;;EA/ByBN,U;;AAmC7BkB,OAAOC,OAAP,GAAiBlB,cAAjB","file":"user.js","sourcesContent":["'use strict';\n\nconst crypto = require('../../utils/crypto');\nconst Controller = require('egg').Controller;\n\nclass UserController extends Controller {\n  async register() {\n    const req = this.ctx.request.body;\n    let res;\n    try {\n      res = await this.ctx.service.user.register(req);\n    } catch (error) {\n      res = 'error';\n    }\n\n    this.ctx.body = res;\n  }\n\n  async login() {\n    const req = this.ctx.request.body;\n    console.log(req);\n    let res = {};\n    try {\n      const user = await this.ctx.service.user.login(req.name, req.pass);\n      const enc = crypto.encrypt(req.pass);\n      if(user[0].pass === enc) {\n        res = {\n          token: 'dvewhjdkqwedqwkdjqwdjqwdlkqwdwq'\n        }\n      }\n    } catch (e) {\n      res = {\n        token: ''\n      };\n    }\n\n    this.ctx.body = res;\n  }\n}\n\nmodule.exports = UserController;\n"]}